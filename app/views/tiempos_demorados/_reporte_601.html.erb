  <div class="page-header">
    <h1>Expedientes Pendientes<small> por procedimientos</small></h1>
  </div>
  <%= link_to 'volver', tiempos_demorados_path %></p>,

<% if @tiempos_demorados.present? %>


<!--

                    'Monday',
                    'Tuesday',
                    'Wednesday',
                    'Thursday',
                    'Friday',
                    'Saturday',
                    'Sunday'
                  -->
<script type="text/javascript">
/*
$(function () {
        $('#container').highcharts({
            chart: {
                type: 'areaspline'
            },
            title: {
                text: 'Expedientes Demorados'
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 150,
                y: 100,
                floating: true,
                borderWidth: 1,
                backgroundColor: '#FFFFFF'
            },
            xAxis: {
                categories: [

              <% @tiempos_demorados.each do |tiempo_demorado| %>
              '<%= tiempo_demorado.cnumero %> - <%= tiempo_demorado.cid %>',
              <% end %>

                ],
                plotBands: [{ // visualize the weekend
                    from: 4.5,
                    to: 6.5,
                    color: 'rgba(68, 170, 213, .2)'
                }]
            },
            yAxis: {
                title: {
                    text: 'Tiempos Transcurrido'
                }
            },
            tooltip: {
                shared: true,
                valueSuffix: ' units'
            },
            credits: {
                enabled: false
            },
            plotOptions: {
                areaspline: {
                    fillOpacity: 0.5
                }
            },
            series: [
            <%
            v_usuario = ""
            @tiempos_demorados.each do |tiempo_demorado|
            tiempo_demorado.cfuncionario
            %>
            {
              <% @tiempos_demorados.each do |tiempo_demorado| %>
              '<%= tiempo_demorado.cnumero %> - <%= tiempo_demorado.cid %>',
                name: 'John',
                data: [3, 4, 3, 5, 4, 10, 12]
            },
            {
                name: 'Jane',
                data: [1, 3, 4, 3, 3, 5, 4]
            }
            <% end %>
            ]
        });
    });
  */
</script>
<div id="container"></div>

    <table class="table table-striped table-bordered table-condensed">
      <tr>
        <th>Expediente</th>
        <th>Registrado</th>
        <th>Tiempo de Proceso</th>
        <th>Tiempo Estimado</th>
        <th>Tiempo de Demora(+/-)</th>
        <th>Funcionario</th>
      </tr>
      <%
       @tiempos_demorados.each do |tiempo_demorado| 
        s_color = "#00FF00"
        if(tiempo_demorado.cminutos.to_s.first=="+")
          s_color = "#FF0000"
        end
        %>
        <tr>
          <td><%= tiempo_demorado.cnumero %> - <%= tiempo_demorado.cid %></td>
          <td><%= tiempo_demorado.cfecha_inicio %></td>
          <td><%= tiempo_letra tiempo_demorado.cminutos_demorados %></td>
          <td><%= tiempo_letra tiempo_demorado.cminutos_estimados %></td>
          <td style="color:<%=s_color.to_s%>;"><%= tiempo_demorado.cminutos.to_s.first %> <%= tiempo_letra tiempo_demorado.cminutos.to_s.from(1) %></td>
          <td><%= tiempo_demorado.cfuncionario %></td>
        </tr>
      <% end %>
    </table> 
  <% else %>
    <p class="alert-message warning">
      No hay datos, <%= link_to 'volver', tiempos_demorados_path %>.
    </p>
  <% end %>